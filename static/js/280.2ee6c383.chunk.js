"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[280],{6280:function(e,r,i){i.r(r),i.d(r,{default:function(){return v}});var n=i(9439),s=i(8303),d=i(2791),t=i(9434),a=i(2522),l=i(184);function o(e){var r=e.orderDetails,i=(0,t.I0)(),o=(0,t.v9)((function(e){return e.user})),c=o.isAuthenticated,u=o.user,v=(0,t.v9)((function(e){return e.order})).isLoading,m=(0,d.useState)(null===r||void 0===r?void 0:r.orderStatus),_=(0,n.Z)(m,2),f=_[0],p=_[1],h=new Date(null===r||void 0===r?void 0:r.orderDate).toDateString().split(" "),N="".concat(h[0]," ").concat(h[1]," ").concat(h[2]),g=new Date(null===r||void 0===r?void 0:r.deliveryDate).toDateString().split(" "),x="".concat(g[0]," ").concat(g[1]," ").concat(g[2]),j=(null===r||void 0===r?void 0:r.orderStatus.charAt(0).toUpperCase())+(null===r||void 0===r?void 0:r.orderStatus.slice(1));return(0,l.jsxs)("div",{className:"order",children:[(0,l.jsxs)("div",{className:"order__imageAndName",children:[(0,l.jsx)("div",{className:"order__imageBox",children:(0,l.jsx)("img",{src:r.productImage,alt:"item",className:"order__image"})}),(0,l.jsx)("div",{className:"order__productName",children:null===r||void 0===r?void 0:r.productName})]}),(0,l.jsxs)("div",{className:"order__info",children:[(0,l.jsxs)("fieldset",{className:"order__fieldset",children:[(0,l.jsx)("legend",{className:"order__fieldsetTitle",children:"Price"}),(0,s.Z)(null===r||void 0===r?void 0:r.productPrice)]}),(0,l.jsxs)("fieldset",{className:"order__fieldset",children:[(0,l.jsx)("legend",{className:"order__fieldsetTitle",children:"Order Quantity"}),null===r||void 0===r?void 0:r.productQuantity]}),(0,l.jsxs)("fieldset",{className:"order__fieldset",children:[(0,l.jsx)("legend",{className:"order__fieldsetTitle",children:"Total Price"}),(0,s.Z)(null===r||void 0===r?void 0:r.productTotalPrice)]}),(0,l.jsxs)("fieldset",{className:"order__fieldset",children:[(0,l.jsx)("legend",{className:"order__fieldsetTitle",children:"Order Status"}),c&&"admin"===(null===u||void 0===u?void 0:u.role)?(0,l.jsxs)("select",{className:"order__statusSelect",value:f,onChange:function(e){return p(e.target.value)},children:[(0,l.jsx)("option",{value:"processing",className:"order__statusOption",children:"Processing"}),(0,l.jsx)("option",{value:"shipped",className:"order__statusOption",children:"Shipped"}),(0,l.jsx)("option",{value:"dispatched",className:"order__statusOption",children:"Dispatched"}),(0,l.jsx)("option",{value:"delivered",className:"order__statusOption",children:"Delivered"})]}):j]}),(0,l.jsxs)("fieldset",{className:"order__fieldset",children:[(0,l.jsx)("legend",{className:"order__fieldsetTitle",children:"Order Date"}),N]}),"delivered"!==f?(0,l.jsxs)("fieldset",{className:"order__fieldset",children:[(0,l.jsx)("legend",{className:"order__fieldsetTitle",children:"Estimated Delivery By"}),x]}):"",c&&"admin"===(null===u||void 0===u?void 0:u.role)?(0,l.jsx)("button",{className:"order__updateButton",disabled:v,onClick:function(){i((0,a.y6)({orderId:null===r||void 0===r?void 0:r.orderId,orderStatus:f}))},children:"Update"}):""]})]})}var c=i(8897),u=i(7689);function v(){var e=(0,d.useRef)(!0),r=(0,t.I0)(),i=(0,u.s0)(),n=(0,t.v9)((function(e){return e.order})),v=n.orders,m=n.pagination,_=n.totalOrdersPrice,f=(0,t.v9)((function(e){return e.user})),p=f.isAuthenticated,h=f.user;return(0,d.useEffect)((function(){if(!0===e.current){if(p&&"admin"===h.role)r((0,a.ci)("page=1"));else if(p)r((0,a.f0)("page=1"));else if(!p)return i("/");return function(){e.current=!1}}}),[r,p,h,i]),(0,l.jsxs)("div",{className:"orders",children:["admin"===(null===h||void 0===h?void 0:h.role)?(0,l.jsx)("div",{className:"orders__heading",children:"All Orders"}):(0,l.jsx)("div",{className:"orders__heading",children:"My Orders"}),(0,l.jsxs)("div",{className:"orders__total",children:[(0,l.jsx)("div",{className:"orders__totalHeading",children:"Total Orders Price"}),(0,l.jsx)("div",{className:"orders__totalPrice",children:(0,s.Z)(_)})]}),(0,l.jsx)("div",{className:"orders__list",children:null!=v?v.map((function(e){return(0,l.jsx)(o,{orderDetails:e},e.orderId)})):(0,l.jsx)("div",{className:"orders__noOrdersFound",children:"No orders found!"})}),null!=m?(0,l.jsx)(c.Z,{paginationDetails:{pageNum:null===m||void 0===m?void 0:m.pageNum,totalItems:null===m||void 0===m?void 0:m.totalOrders,itemsPerPage:null===m||void 0===m?void 0:m.ordersPerPage},onPrevPage:function(e){p&&"admin"===h.role?r((0,a.ci)("page=".concat(e))):p&&r((0,a.f0)("page=".concat(e)))},onNextPage:function(e){p&&"admin"===h.role?r((0,a.ci)("page=".concat(e))):p&&r((0,a.f0)("page=".concat(e)))},onPageNum:function(e){p&&"admin"===h.role?r((0,a.ci)("page=".concat(e))):p&&r((0,a.f0)("page=".concat(e)))}}):""]})}},8897:function(e,r,i){i.d(r,{Z:function(){return t}});var n=i(9439),s=i(2791),d=i(184);function t(e){var r,i,t,a,l=e.paginationDetails,o=e.onPrevPage,c=e.onNextPage,u=e.onPageNum,v=(0,s.useState)(null==l?1:null===l||void 0===l?void 0:l.pageNum),m=(0,n.Z)(v,2),_=m[0],f=m[1];if(null!=l){r=null===l||void 0===l?void 0:l.totalItems,i=null===l||void 0===l?void 0:l.itemsPerPage,t=[],a=Math.ceil(r/i);for(var p=function(e){t.push((0,d.jsx)("div",{className:"pagination__numberButtons ".concat(_===e+1?"active":""),onClick:function(){return f(r=e+1),void u(r);var r},children:e+1},e+1))},h=0;h<a;h++)p(h)}return null!=(null===l||void 0===l?void 0:l.pageNum)?(0,d.jsxs)("div",{className:"pagination",children:[(0,d.jsx)("div",{className:"pagination__previousButton",onClick:function(){var e=_;1===_?f(e=a):(--e,f(e)),o(e)},children:"<"}),t,(0,d.jsx)("div",{className:"pagination__nextButton",onClick:function(){var e=_;_===a?f(e=1):(++e,f(e)),c(e)},children:">"})]}):""}},8303:function(e,r,i){function n(e){return new Intl.NumberFormat("hi-in",{currency:"INR",style:"currency"}).format(e)}i.d(r,{Z:function(){return n}})}}]);
//# sourceMappingURL=280.2ee6c383.chunk.js.map